/**
 * Fetch the primary records. This mutates `context.response`
 * for the next method.
 *
 * @return {Promise}
 */
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

exports['default'] = function (context) {
  var adapter = this.adapter;
  var _context$request = context.request;
  var type = _context$request.type;
  var ids = _context$request.ids;
  var options = _context$request.options;
  var meta = _context$request.meta;

  if (!type) return context;

  var args = [type, ids];

  args.push(options ? options : null);
  if (meta) args.push(meta);

  return adapter.find.apply(adapter, args).then(function (records) {
    Object.defineProperty(context.response, 'records', {
      configurable: true,
      value: records
    });

    return context;
  });
};

module.exports = exports['default'];