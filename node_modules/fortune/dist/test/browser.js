'use strict';

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

require('./integration/adapters/indexeddb');

require('./integration/adapters/webstorage');

var _tapdance = require('tapdance');

var _libBrowser = require('../lib/browser');

var _libBrowser2 = _interopRequireDefault(_libBrowser);

var _helpers = require('./helpers');

(0, _tapdance.run)(function () {
  (0, _tapdance.comment)('can run in browser');

  (0, _helpers.ok)('indexedDB' in _libBrowser2['default'].adapters, 'indexeddb adapter exists');
  (0, _helpers.ok)('webStorage' in _libBrowser2['default'].adapters, 'web storage adapter exists');

  var store = _libBrowser2['default'].create();

  return store.connect().then(function (store) {
    (0, _helpers.ok)(store instanceof _libBrowser2['default'], 'instantiation works');
    return store.disconnect();
  })['catch'](function (error) {
    return (0, _tapdance.fail)(error);
  });
});